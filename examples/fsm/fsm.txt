
Scripts are a direct implementation of a Finite state machine

each state has a set of rules in the form of:


"pattern" = "replacement" -> state ;

A state is introduced by its name:


[state1]

 "A" = "a" $v -> s2 ;

The patterns BEGIN and END match when entering/exiting a state

There are 26 string variable named $a-$z

Captures in the pattern are treated as variables $0-$9

The following functions are implemented

@set(a,b)     - set a to b
@add(a,b)     - set a to a+b
@sub(a,b)     - set a to a-b
@div(a,b)     - set a to a/b
@mul(a,b)     - set a to a*b
@mod(a,b)     - set a to a%b
@cat(a,b)     - append b to a

@mid(a,b,i,j) - set a to the substring of b from i to j (inclusive)
@len(a,b)     - set a to the length of b

@lnm(a)       - set a to current line number
 
@ret          - exit from the current state
@clr          - clear all the accumulated text

@if(x op y, a, b)
@case(x,y,w,z,...,q)

